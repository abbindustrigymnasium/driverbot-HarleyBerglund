<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="Style.css">

<head>
    <meta charset="utf-8">
    <title>MotorMQTT</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js" type="text/javascript">
    </script>
    <script type="text/javascript" src="Keys.js"></script>
    <script type="text/javascript" src="Connect.js"></script>
    <script type="text/javascript" src="Mapping.js"></script>
    <script type="text/javascript" src="joy.js"></script>
    <script type="text/javascript" src="Joystick.js"></script>
    <script type="text/javascript" src="joy.min.js"></script>


</head>

<body>
    <!-- Header
    ............................................................................................ -->
    <div class="topnav" align="center" class="wrapper">
        <h1 class="text1">
            MotorMQTT
        </h1>
    </div>

    </head>
    - <div id="joyStick">
        <script type="text/javascript" src="./nipplejs.js"></script>
        <script type="text/javascript">
            var radius = 100;

            var sampleJoystick = {
                mode: 'static',
                position: {
                    left: '50%',
                    top: '50%'
                },
                threshold: 100,
                size: radius * 4,
                color: 'black',

            };

            var joystick;
            var position;
            joystick = nipplejs.create(sampleJoystick);
            joystick.on('start end', function (evt, data) {
                position = data;
            }).on('move', function (evt, data) {
                //position = data;
                xValue = Math.round(data.position.x);
                yValue = Math.round(data.position.y);
                //console.log("X: " + xValue)
                //console.log("Y: " + yValue)

                if (yValue > 280) {
                    var yBack = Math.round(map(yValue, 322, 522, 900, 1024));
                    POWER = 1;
                    output = yBack;
                    // console.log(yBack);
                    onMotor();

                } else if (yValue < 366) {
                    var yForward = Math.round(map(yValue, 322, 122, 900, 1024));
                    POWER = 0;
                    output = yForward;
                    // console.log(yForward);
                    onMotor();

                }
                if (yValue > 280 && yValue < 366) {
                    var yStop = 0;
                    POWER = 0;
                    output = yStop;
                    // console.log(yBack);
                    onMotor();

                }


                var Steering = Math.round(map(xValue, 210, 610, 180, 0));
                output2 = Steering;
                onServo();

            });
        </script>
</body>

</html>